# TagCloud å‰åç«¯åˆ†ç¦»æ¶æ„

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
vite-project/
â”œâ”€â”€ src/                    # å‰ç«¯æºç  (Vite + Vue 3)
â”œâ”€â”€ nuxt-backend/           # åç«¯æœåŠ¡ (Nuxt.js)
â”‚   â”œâ”€â”€ server/
â”‚   â”‚   â”œâ”€â”€ api/ai/         # AI ç›¸å…³ API æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.post.js    # æµå¼èŠå¤©æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ search.post.js  # è¯­ä¹‰æœç´¢æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ status.get.js   # æœåŠ¡çŠ¶æ€æ£€æŸ¥
â”‚   â”‚   â”‚   â””â”€â”€ models.get.js   # æ¨¡å‹åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â””â”€â”€ aiHelpers.js    # AI æœåŠ¡å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ .env                # ç¯å¢ƒå˜é‡ï¼ˆæ•æ„Ÿä¿¡æ¯ï¼‰
â”‚   â”œâ”€â”€ .env.example        # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚   â””â”€â”€ nuxt.config.js      # Nuxt é…ç½®
â”œâ”€â”€ nginx-1.28.1/           # Nginx åå‘ä»£ç†
â”‚   â””â”€â”€ conf/nginx.conf     # Nginx é…ç½®æ–‡ä»¶
â””â”€â”€ public/data/            # GeoJSON æ•°æ®
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1. é…ç½®åç«¯ç¯å¢ƒå˜é‡

```bash
cd nuxt-backend
copy .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API Key
```

### 2. å®‰è£…åç«¯ä¾èµ–

```bash
cd nuxt-backend
npm install
```

### 3. å¯åŠ¨æœåŠ¡

**æ–¹å¼ Aï¼šåˆ†åˆ«å¯åŠ¨ï¼ˆå¼€å‘è°ƒè¯•ï¼‰**

```bash
# ç»ˆç«¯ 1 - å¯åŠ¨åç«¯
cd nuxt-backend
npm run dev
# åç«¯è¿è¡Œåœ¨ http://localhost:3000

# ç»ˆç«¯ 2 - å¯åŠ¨å‰ç«¯
cd vite-project
npm run dev
# å‰ç«¯è¿è¡Œåœ¨ http://localhost:5173
```

**æ–¹å¼ Bï¼šé€šè¿‡ Nginx ç»Ÿä¸€å…¥å£ï¼ˆæ¨èï¼‰**

```bash
# 1. å¯åŠ¨åç«¯å’Œå‰ç«¯ï¼ˆåŒä¸Šï¼‰

# 2. å¯åŠ¨ Nginx
cd nginx-1.28.1
nginx.exe

# è®¿é—® http://localhost:8080
```

### 4. åœæ­¢ Nginx

```bash
cd nginx-1.28.1
nginx.exe -s stop
```

---

## ğŸ”Œ API æ¥å£è¯´æ˜

### POST /api/ai/chat

æµå¼èŠå¤©æ¥å£ï¼Œæ”¯æŒ SSE å“åº”ã€‚

**è¯·æ±‚ä½“ï¼š**

```json
{
  "messages": [
    { "role": "user", "content": "åˆ†æ POI åˆ†å¸ƒ" }
  ],
  "poiFeatures": [...],  // GeoJSON Feature æ•°ç»„
  "options": {
    "temperature": 0.7,
    "maxTokens": 2048
  }
}
```

**å“åº”ï¼š** SSE æµå¼å“åº”

---

### POST /api/ai/search

è¯­ä¹‰æœç´¢æ¥å£ã€‚

**è¯·æ±‚ä½“ï¼š**

```json
{
  "keyword": "å¥¶èŒ¶",
  "poiNames": ["èœœé›ªå†°åŸ", "æµ·åº•æ", ...],
  "batchIndex": 0
}
```

**å“åº”ï¼š**

```json
{
  "matchedNames": ["èœœé›ªå†°åŸ", "ä¸€ç‚¹ç‚¹", ...]
}
```

---

### GET /api/ai/status

æ£€æŸ¥ AI æœåŠ¡çŠ¶æ€ã€‚

**å“åº”ï¼š**

```json
{
  "online": true,
  "provider": "local",
  "providerName": "Local LM Studio"
}
```

---

### GET /api/ai/models

è·å–å¯ç”¨æ¨¡å‹åˆ—è¡¨ã€‚

**å“åº”ï¼š**

```json
{
  "provider": "local",
  "models": [...]
}
```

---

## ğŸ”’ å®‰å…¨è¯´æ˜

| ä¿¡æ¯ç±»å‹     | ä½ç½®                 | æš´éœ²é£é™©  |
| ------------ | -------------------- | --------- |
| MiMo API Key | åç«¯ `.env` æ–‡ä»¶     | âŒ ä¸æš´éœ² |
| AI æ¨¡å‹é…ç½®  | åç«¯ `runtimeConfig` | âŒ ä¸æš´éœ² |
| POI æ•°æ®     | å‰ç«¯å‘é€åˆ°åç«¯       | âš ï¸ ä¼ è¾“ä¸­ |

---

## ğŸ—ï¸ Nginx é…ç½®è¯´æ˜

```nginx
# ç»Ÿä¸€å…¥å£ï¼šhttp://localhost:8080

location /api/ {
    proxy_pass http://127.0.0.1:3000;  # Nuxt åç«¯
    proxy_buffering off;                # æ”¯æŒ SSE æµ
}

location / {
    proxy_pass http://127.0.0.1:5173;  # Vite å‰ç«¯
}
```

---

## ğŸ“‹ å¼€å‘æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒå˜é‡**ï¼šç¡®ä¿ `.env` æ–‡ä»¶å·²æ­£ç¡®é…ç½®
2. **æœåŠ¡é¡ºåº**ï¼šå…ˆå¯åŠ¨åç«¯ï¼Œå†å¯åŠ¨å‰ç«¯
3. **ç«¯å£å ç”¨**ï¼šç¡®ä¿ 3000ã€5173ã€8080 ç«¯å£æœªè¢«å ç”¨
4. **æœ¬åœ° LM Studio**ï¼šå¦‚éœ€ä½¿ç”¨æœ¬åœ°æ¨¡å‹ï¼Œç¡®ä¿ LM Studio åœ¨ `localhost:1234` è¿è¡Œ
