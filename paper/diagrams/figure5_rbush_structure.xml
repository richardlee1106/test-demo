<mxfile host="app.diagrams.net" version="22.1.0">
  <diagram name="RBush空间索引结构" id="rbush-structure">
    <mxGraphModel dx="850" dy="600" grid="1" guides="1" tooltips="1" connect="1" arrows="1" page="1" pageWidth="750" pageHeight="500">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- 标题 -->
        <mxCell id="TITLE" value="图5：RBush空间索引结构示意图" style="text;fontFamily=Microsoft YaHei;fontSize=16;fontStyle=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="175" y="10" width="400" height="30" as="geometry"/>
        </mxCell>
        
        <!-- ========== 左侧：空间视图 ========== -->
        <mxCell id="leftPanel" value="" style="rounded=1;fillColor=#f5f5f5;strokeColor=#999;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="50" width="330" height="380" as="geometry"/>
        </mxCell>
        <mxCell id="leftT" value="空间视图 (标签包围盒)" style="text;fontFamily=Microsoft YaHei;fontSize=12;fontStyle=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="30" y="55" width="330" height="22" as="geometry"/>
        </mxCell>
        
        <!-- 根节点MBR -->
        <mxCell id="rootMBR" value="" style="rounded=0;fillColor=none;strokeColor=#b85450;strokeWidth=3;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="85" width="290" height="200" as="geometry"/>
        </mxCell>
        <mxCell id="rootMBRL" value="Root MBR" style="text;fontFamily=Microsoft YaHei;fontSize=9;fontStyle=1;fillColor=#f8cecc;strokeColor=#b85450;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="265" y="90" width="65" height="16" as="geometry"/>
        </mxCell>
        
        <!-- 子节点MBR 1 (左侧) -->
        <mxCell id="child1MBR" value="" style="rounded=0;fillColor=none;strokeColor=#d79b00;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="60" y="95" width="130" height="120" as="geometry"/>
        </mxCell>
        <mxCell id="child1L" value="MBR₁" style="text;fontSize=8;fontStyle=1;fillColor=#ffe6cc;strokeColor=#d79b00;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="65" y="98" width="38" height="14" as="geometry"/>
        </mxCell>
        
        <!-- 子节点MBR 2 (右侧) -->
        <mxCell id="child2MBR" value="" style="rounded=0;fillColor=none;strokeColor=#6c8ebf;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="110" width="130" height="160" as="geometry"/>
        </mxCell>
        <mxCell id="child2L" value="MBR₂" style="text;fontSize=8;fontStyle=1;fillColor=#dae8fc;strokeColor=#6c8ebf;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="290" y="113" width="38" height="14" as="geometry"/>
        </mxCell>
        
        <!-- 标签包围盒 (叶子节点) -->
        <mxCell id="tag1" value="美食" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Microsoft YaHei;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="75" y="120" width="55" height="28" as="geometry"/>
        </mxCell>
        <mxCell id="tag2" value="购物" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Microsoft YaHei;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="135" y="155" width="45" height="24" as="geometry"/>
        </mxCell>
        <mxCell id="tag3" value="休闲" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Microsoft YaHei;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="75" y="175" width="45" height="24" as="geometry"/>
        </mxCell>
        
        <mxCell id="tag4" value="酒店" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Microsoft YaHei;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="215" y="135" width="55" height="28" as="geometry"/>
        </mxCell>
        <mxCell id="tag5" value="景点" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Microsoft YaHei;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="275" y="170" width="45" height="24" as="geometry"/>
        </mxCell>
        <mxCell id="tag6" value="交通" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Microsoft YaHei;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="215" y="200" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="tag7" value="医疗" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Microsoft YaHei;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="260" y="230" width="40" height="20" as="geometry"/>
        </mxCell>
        
        <!-- 查询框 -->
        <mxCell id="queryBox" value="" style="rounded=0;fillColor=none;strokeColor=#ff0000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="180" y="155" width="60" height="35" as="geometry"/>
        </mxCell>
        <mxCell id="queryL" value="查询区域" style="text;fontSize=8;fontStyle=1;fillColor=#f8cecc;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="178" y="192" width="48" height="14" as="geometry"/>
        </mxCell>
        
        <!-- 包围盒说明 -->
        <mxCell id="bboxInfo" value="包围盒定义:&#xa;{minX, minY, maxX, maxY}" style="text;fontFamily=Consolas;fontSize=9;align=left;fillColor=#fff;strokeColor=#999;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="300" width="150" height="35" as="geometry"/>
        </mxCell>
        
        <mxCell id="paddingInfo" value="padding扩展:&#xa;防止标签紧贴" style="text;fontFamily=Microsoft YaHei;fontSize=9;align=left;fillColor=#fff;strokeColor=#999;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="210" y="300" width="130" height="35" as="geometry"/>
        </mxCell>
        
        <!-- ========== 右侧：树形结构 ========== -->
        <mxCell id="rightPanel" value="" style="rounded=1;fillColor=#f5f5f5;strokeColor=#999;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="380" y="50" width="350" height="380" as="geometry"/>
        </mxCell>
        <mxCell id="rightT" value="树形结构 (R-Tree)" style="text;fontFamily=Microsoft YaHei;fontSize=12;fontStyle=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="380" y="55" width="350" height="22" as="geometry"/>
        </mxCell>
        
        <!-- 根节点 -->
        <mxCell id="root" value="Root" style="rounded=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Microsoft YaHei;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="515" y="85" width="80" height="30" as="geometry"/>
        </mxCell>
        
        <!-- 中间节点 -->
        <mxCell id="node1" value="Node₁" style="rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontFamily=Microsoft YaHei;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="430" y="150" width="70" height="28" as="geometry"/>
        </mxCell>
        <mxCell id="node2" value="Node₂" style="rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Microsoft YaHei;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="610" y="150" width="70" height="28" as="geometry"/>
        </mxCell>
        
        <!-- 叶子节点 (标签) -->
        <mxCell id="leaf1" value="美食" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="400" y="215" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="leaf2" value="购物" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="445" y="215" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="leaf3" value="休闲" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="490" y="215" width="40" height="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="leaf4" value="酒店" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="565" y="215" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="leaf5" value="景点" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="610" y="215" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="leaf6" value="交通" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="655" y="215" width="40" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="leaf7" value="医疗" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="700" y="215" width="40" height="20" as="geometry"/>
        </mxCell>
        
        <!-- 连接线 -->
        <mxCell id="e1" style="endArrow=none;strokeWidth=2;strokeColor=#666;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="555" y="115" as="sourcePoint"/>
            <mxPoint x="465" y="150" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="e2" style="endArrow=none;strokeWidth=2;strokeColor=#666;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="555" y="115" as="sourcePoint"/>
            <mxPoint x="645" y="150" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="e3" style="endArrow=none;strokeWidth=1;strokeColor=#999;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="465" y="178" as="sourcePoint"/>
            <mxPoint x="420" y="215" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="e4" style="endArrow=none;strokeWidth=1;strokeColor=#999;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="465" y="178" as="sourcePoint"/>
            <mxPoint x="465" y="215" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="e5" style="endArrow=none;strokeWidth=1;strokeColor=#999;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="465" y="178" as="sourcePoint"/>
            <mxPoint x="510" y="215" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="e6" style="endArrow=none;strokeWidth=1;strokeColor=#999;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="645" y="178" as="sourcePoint"/>
            <mxPoint x="585" y="215" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="e7" style="endArrow=none;strokeWidth=1;strokeColor=#999;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="645" y="178" as="sourcePoint"/>
            <mxPoint x="630" y="215" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="e8" style="endArrow=none;strokeWidth=1;strokeColor=#999;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="645" y="178" as="sourcePoint"/>
            <mxPoint x="675" y="215" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="e9" style="endArrow=none;strokeWidth=1;strokeColor=#999;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="645" y="178" as="sourcePoint"/>
            <mxPoint x="720" y="215" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- 复杂度说明 -->
        <mxCell id="complex" value="" style="rounded=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="400" y="260" width="310" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="complexT" value="时间复杂度对比" style="text;fontFamily=Microsoft YaHei;fontSize=11;fontStyle=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="400" y="265" width="310" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="complexC" value="暴力遍历: O(n) | RBush: O(log n)&#xa;&#xa;1000标签: 暴力~1000次 vs RBush~10次" style="text;fontFamily=Microsoft YaHei;fontSize=10;align=center;" vertex="1" parent="1">
          <mxGeometry x="405" y="290" width="300" height="45" as="geometry"/>
        </mxCell>
        
        <!-- API说明 -->
        <mxCell id="api" value="RBush API:&#xa;• tree.insert(item)&#xa;• tree.collides(bbox)&#xa;• tree.search(bbox)" style="text;fontFamily=Consolas;fontSize=9;align=left;fillColor=#fff2cc;strokeColor=#d6b656;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="355" width="140" height="65" as="geometry"/>
        </mxCell>
        
        <!-- item结构 -->
        <mxCell id="item" value="item结构:&#xa;{ minX, minY,&#xa;  maxX, maxY,&#xa;  tag: {...} }" style="text;fontFamily=Consolas;fontSize=9;align=left;fillColor=#d5e8d4;strokeColor=#82b366;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="560" y="355" width="100" height="65" as="geometry"/>
        </mxCell>
        
        <!-- 图例 -->
        <mxCell id="legend" value="" style="rounded=1;fillColor=#fff;strokeColor=#999;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="440" width="330" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="lgT" value="图例:" style="text;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="450" width="35" height="16" as="geometry"/>
        </mxCell>
        <mxCell id="lg1" value="" style="rounded=0;fillColor=none;strokeColor=#b85450;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="450" width="20" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="lg1T" value="根MBR" style="text;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="103" y="450" width="40" height="14" as="geometry"/>
        </mxCell>
        <mxCell id="lg2" value="" style="rounded=0;fillColor=none;strokeColor=#d79b00;strokeWidth=1;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="150" y="450" width="20" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="lg2T" value="子MBR" style="text;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="173" y="450" width="40" height="14" as="geometry"/>
        </mxCell>
        <mxCell id="lg3" value="" style="rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="220" y="450" width="20" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="lg3T" value="叶节点(标签)" style="text;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="243" y="450" width="65" height="14" as="geometry"/>
        </mxCell>
        <mxCell id="lg4" value="" style="rounded=0;fillColor=none;strokeColor=#ff0000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="315" y="450" width="20" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="lg4T" value="查询" style="text;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="338" y="450" width="25" height="14" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
